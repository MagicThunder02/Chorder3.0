!function(){function t(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function i(t,i){for(var e=0;e<i.length;e++){var o=i[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{iFnQ:function(e,o,n){"use strict";n.r(o),n.d(o,"NotefinderModule",function(){return S});var c=n("ofXK"),r=n("3Pt+"),s=n("TEn/"),a=n("tyNb"),b=n("mrSG"),l=n("dy81"),h=n("XlTo"),d=n("4WDQ"),u=n("gkyA"),f=n("90kD"),g=n("fXoL"),m=n("sYmb");function p(t,i){if(1&t&&(g.Mb(0,"ion-select-option",10),g.oc(1),g.Xb(2,"musicNotation"),g.Lb()),2&t){var e=i.$implicit;g.bc("value",e),g.xb(1),g.qc(" ",g.Yb(2,2,e),"")}}function y(t,i){if(1&t){var e=g.Nb();g.Mb(0,"ion-col",11),g.Mb(1,"ion-button",12),g.Ub("click",function(){g.gc(e);var t=i.$implicit;return g.Wb().selectTypeTile(t)}),g.oc(2),g.Xb(3,"translate"),g.Lb(),g.Lb()}if(2&t){var o=i.$implicit;g.xb(1),g.bc("color",o.color),g.xb(1),g.qc(" ",g.Yb(3,2,"notefinder."+o.name)," ")}}function v(t,i){if(1&t){var e=g.Nb();g.Mb(0,"ion-col",13),g.Mb(1,"ion-button",12),g.Ub("click",function(){g.gc(e);var t=i.$implicit;return g.Wb().selectGradeTile(t)}),g.oc(2),g.Xb(3,"musicNotation"),g.Lb(),g.Lb()}if(2&t){var o=i.$implicit;g.xb(1),g.bc("color",o.color),g.xb(1),g.qc(" ",g.Yb(3,2,o.name)," ")}}function x(t,i){if(1&t&&(g.Mb(0,"ion-card-subtitle"),g.oc(1),g.Lb()),2&t){var e=g.Wb(2).$implicit,o=g.Wb(2);g.xb(1),g.qc(" notes: ",o.beautify(e.chord.notes,!0)," ")}}function k(t,i){if(1&t&&(g.Mb(0,"ion-card-subtitle"),g.oc(1),g.Xb(2,"musicNotation"),g.Lb()),2&t){var e=g.Wb(2).$implicit;g.xb(1),g.qc(" ",g.Yb(2,1,e.chord.name)," ")}}function M(t,i){if(1&t){var e=g.Nb();g.Mb(0,"ion-card-header",17),g.Ub("click",function(){g.gc(e);var t=g.Wb().$implicit;return g.Wb(2).toggleCard(t)}),g.Mb(1,"ion-card-title"),g.oc(2),g.Xb(3,"musicNotation"),g.Lb(),g.mc(4,x,2,1,"ion-card-subtitle",9),g.mc(5,k,3,3,"ion-card-subtitle",9),g.Lb()}if(2&t){var o=g.Wb().$implicit,n=g.Wb(2);g.xb(2),g.pc(g.Yb(3,3,o.chord.symbol)),g.xb(2),g.bc("ngIf",o.show&&0!=o.chord.notes.length),g.xb(1),g.bc("ngIf",o.show&&o.chord.name.trim()!=n.key.trim())}}function C(t,i){if(1&t&&(g.Mb(0,"ion-text"),g.oc(1),g.Xb(2,"musicNotation"),g.Ib(3,"br"),g.Lb()),2&t){var e=g.Wb(2).$implicit;g.xb(1),g.qc("tonic: ",g.Yb(2,1,e.chord.tonic)," ")}}function L(t,i){if(1&t&&(g.Mb(0,"ion-text"),g.oc(1),g.Xb(2,"musicNotation"),g.Ib(3,"br"),g.Lb()),2&t){var e=g.Wb(2).$implicit;g.xb(1),g.qc("root: ",g.Yb(2,1,e.chord.root),"")}}function I(t,i){if(1&t&&(g.Mb(0,"ion-text"),g.oc(1),g.Ib(2,"br"),g.Lb()),2&t){var e=g.Wb(2).$implicit,o=g.Wb(2);g.xb(1),g.qc("intervals: ",o.beautify(e.chord.intervals)," ")}}function W(t,i){if(1&t&&(g.Mb(0,"ion-text"),g.oc(1),g.Xb(2,"musicNotation"),g.Ib(3,"br"),g.Lb()),2&t){var e=g.Wb(2).$implicit;g.xb(1),g.qc(" type: ",g.Yb(2,1,e.chord.type)," ")}}function T(t,i){if(1&t&&(g.Mb(0,"ion-text"),g.oc(1),g.Ib(2,"br"),g.Lb()),2&t){var e=g.Wb(2).$implicit,o=g.Wb(2);g.xb(1),g.qc(" aliases: ",o.beautify(e.chord.aliases,!0),"")}}function w(t,i){if(1&t&&(g.Mb(0,"ion-card-content"),g.mc(1,C,4,3,"ion-text",9),g.mc(2,L,4,3,"ion-text",9),g.mc(3,I,3,1,"ion-text",9),g.mc(4,W,4,3,"ion-text",9),g.mc(5,T,3,1,"ion-text",9),g.Lb()),2&t){var e=g.Wb().$implicit;g.xb(1),g.bc("ngIf",e.chord.tonic),g.xb(1),g.bc("ngIf",e.chord.root),g.xb(1),g.bc("ngIf",e.chord.intervals),g.xb(1),g.bc("ngIf",e.chord.type),g.xb(1),g.bc("ngIf",e.chord.aliases)}}function E(t,i){if(1&t&&(g.Mb(0,"ion-card",15),g.mc(1,M,6,5,"ion-card-header",16),g.mc(2,w,6,5,"ion-card-content",9),g.Lb()),2&t){var e=i.$implicit;g.xb(1),g.bc("ngIf",!e.chord.empty),g.xb(1),g.bc("ngIf",e.show)}}function $(t,i){if(1&t&&(g.Kb(0),g.mc(1,E,3,2,"ion-card",14),g.Jb()),2&t){var e=g.Wb();g.xb(1),g.bc("ngForOf",e.chords)}}function F(t,i){if(1&t&&(g.Mb(0,"ion-card-title"),g.oc(1),g.Lb()),2&t){var e=g.Wb(2).$implicit,o=g.Wb(2);g.xb(1),g.qc(" ",o.beautify(e.chord.notes,!0)," ")}}function X(t,i){if(1&t&&(g.Mb(0,"ion-card-subtitle"),g.oc(1),g.Xb(2,"musicNotation"),g.Lb()),2&t){var e=g.Wb(2).$implicit;g.xb(1),g.qc(" ",g.Yb(2,1,e.chord.name)," ")}}function N(t,i){if(1&t){var e=g.Nb();g.Mb(0,"ion-card-header",17),g.Ub("click",function(){g.gc(e);var t=g.Wb().$implicit;return g.Wb(2).toggleCard(t)}),g.Mb(1,"ion-card-title"),g.oc(2),g.Xb(3,"musicNotation"),g.Lb(),g.mc(4,F,2,1,"ion-card-title",9),g.mc(5,X,3,3,"ion-card-subtitle",9),g.Lb()}if(2&t){var o=g.Wb().$implicit,n=g.Wb(2);g.xb(2),g.pc(g.Yb(3,3,o.chord.symbol)),g.xb(2),g.bc("ngIf",o.show&&0!=o.chord.notes.length),g.xb(1),g.bc("ngIf",o.show&&o.chord.name.trim()!=n.key.trim())}}function Y(t,i){if(1&t&&(g.Mb(0,"ion-text"),g.oc(1),g.Xb(2,"translate"),g.Xb(3,"musicNotation"),g.Ib(4,"br"),g.Lb()),2&t){var e=g.Wb(2).$implicit;g.xb(1),g.rc("",g.Yb(2,2,"tonic"),": ",g.Yb(3,4,e.chord.tonic)," ")}}function q(t,i){if(1&t&&(g.Mb(0,"ion-text"),g.oc(1),g.Xb(2,"translate"),g.Xb(3,"musicNotation"),g.Ib(4,"br"),g.Lb()),2&t){var e=g.Wb(2).$implicit;g.xb(1),g.rc("",g.Yb(2,2,"root"),": ",g.Yb(3,4,e.chord.root),"")}}function A(t,i){if(1&t&&(g.Mb(0,"ion-text"),g.oc(1),g.Xb(2,"translate"),g.Ib(3,"br"),g.Lb()),2&t){var e=g.Wb(2).$implicit,o=g.Wb(2);g.xb(1),g.rc("",g.Yb(2,2,"intervals"),": ",o.beautify(e.chord.intervals)," ")}}function O(t,i){if(1&t&&(g.Mb(0,"ion-text"),g.oc(1),g.Xb(2,"translate"),g.Xb(3,"translate"),g.Ib(4,"br"),g.Lb()),2&t){var e=g.Wb(2).$implicit;g.xb(1),g.rc(" ",g.Yb(2,2,"type"),": ",g.Yb(3,4,e.chord.type)," ")}}function U(t,i){if(1&t&&(g.Mb(0,"ion-text"),g.oc(1),g.Xb(2,"translate"),g.Ib(3,"br"),g.Ib(4,"br"),g.Lb()),2&t){var e=g.Wb(2).$implicit,o=g.Wb(2);g.xb(1),g.rc(" ",g.Yb(2,2,"aliases"),": ",o.beautify(e.chord.aliases,!0),"")}}function G(t,i){if(1&t){var e=g.Nb();g.Mb(0,"ion-button",19),g.Ub("click",function(){g.gc(e);var t=g.Wb(2).$implicit;return g.Wb(2).playChord(t,"chord")}),g.oc(1),g.Xb(2,"translate"),g.Lb()}2&t&&(g.xb(1),g.qc(" ",g.Yb(2,1,"play_chord")," "))}function D(t,i){if(1&t){var e=g.Nb();g.Mb(0,"ion-button",19),g.Ub("click",function(){g.gc(e);var t=g.Wb(2).$implicit;return g.Wb(2).playChord(t,"arp")}),g.oc(1),g.Xb(2,"translate"),g.Lb()}2&t&&(g.xb(1),g.qc(" ",g.Yb(2,1,"play_arp")," "))}function P(t,i){if(1&t&&(g.Mb(0,"ion-card-content"),g.mc(1,Y,5,6,"ion-text",9),g.mc(2,q,5,6,"ion-text",9),g.mc(3,A,4,4,"ion-text",9),g.mc(4,O,5,6,"ion-text",9),g.mc(5,U,5,4,"ion-text",9),g.mc(6,G,3,3,"ion-button",18),g.mc(7,D,3,3,"ion-button",18),g.Lb()),2&t){var e=g.Wb().$implicit,o=g.Wb(2);g.xb(1),g.bc("ngIf",e.chord.tonic),g.xb(1),g.bc("ngIf",e.chord.root),g.xb(1),g.bc("ngIf",e.chord.intervals),g.xb(1),g.bc("ngIf",e.chord.type),g.xb(1),g.bc("ngIf",e.chord.aliases),g.xb(1),g.bc("ngIf","1"==o.status[0]),g.xb(1),g.bc("ngIf","1"==o.status[0])}}function B(t,i){if(1&t&&(g.Mb(0,"ion-card",15),g.mc(1,N,6,5,"ion-card-header",16),g.mc(2,P,8,7,"ion-card-content",9),g.Lb()),2&t){var e=i.$implicit;g.xb(1),g.bc("ngIf",!e.chord.empty),g.xb(1),g.bc("ngIf",e.show)}}function V(t,i){if(1&t&&(g.Kb(0),g.mc(1,B,3,2,"ion-card",14),g.Jb()),2&t){var e=g.Wb();g.xb(1),g.bc("ngForOf",e.filteredChords)}}var j,H,z=((j=function(){function e(i,o,n){t(this,e),this.translate=i,this.global=o,this.modalCtrl=n,this.musicNotationPipe=new u.a(this.global),this.scale=[],this.typesTiles=[],this.gradesTiles=[],this.key="",this.type="",this.grade="",this.chords=[],this.filteredChords=[],this.status="",this.serVal="",this.synth=new h.c({urls:{A2:"pianoA2.wav"},baseUrl:"assets/instruments/"}).toDestination()}var o,n,c;return o=e,(n=[{key:"ionViewDidEnter",value:function(){this.selectInstrument()}},{key:"selectInstrument",value:function(){this.synth="",console.log(this.global.instrument),this.synth=new h.c({urls:{A2:this.global.instrument+"A2.wav"},baseUrl:"assets/instruments/"}).toDestination()}},{key:"checkStatus",value:function(){this.status="",this.status=" "==this.key||""==this.key?this.status+"0":this.status+"1",this.status=this.typesTiles[0].selected||this.typesTiles[1].selected||this.typesTiles[2].selected||this.typesTiles[3].selected?this.status+"1":this.status+"0",this.status=this.gradesTiles[0].selected||this.gradesTiles[1].selected||this.gradesTiles[2].selected||this.gradesTiles[3].selected||this.gradesTiles[4].selected?this.status+"1":this.status+"0",console.log(this.status)}},{key:"pushAll",value:function(){this.chords=[];var t=this.key.trim()+"major";this.pushExtendedChords(t),t=this.key.trim()+"min",this.pushExtendedChords(t),t=this.key.trim()+"dim",this.pushExtendedChords(t),t=this.key.trim()+"aug",this.pushExtendedChords(t)}},{key:"pushExtendedChords",value:function(t){var i=this,e=l.a.extended(t);this.chords.push({chord:l.a.get(t),show:!1}),e.forEach(function(t){i.chords.push({chord:l.a.get(t),show:!1})})}},{key:"selectTypeTile",value:function(t){this.type=t.name,this.toggleTypeTile(t),this.colorTiles(),this.searchChord(),console.log(this.type)}},{key:"selectGradeTile",value:function(t){this.grade=t.name,this.toggleGradeTile(t),this.colorTiles(),this.searchChord(),console.log(this.type)}},{key:"toggleTypeTile",value:function(t){0==t.selected?(this.typesTiles.forEach(function(t){t.selected=!1}),t.selected=!0):t.selected=!1}},{key:"toggleGradeTile",value:function(t){0==t.selected?(this.gradesTiles.forEach(function(t){t.selected=!1}),t.selected=!0):t.selected=!1}},{key:"colorTiles",value:function(){this.typesTiles.forEach(function(t){t.color=t.selected?"secondary":"light"}),this.gradesTiles.forEach(function(t){t.color=t.selected?"secondary":"light"})}},{key:"gradeFilter",value:function(){var t=this;if("1"==this.status[2]){var i=[];this.chords.forEach(function(e){e.chord.symbol.includes(t.grade)&&i.push(e)}),this.chords=i}}},{key:"searchChord",value:function(){this.checkStatus();var t=this.key.trim()+this.type;switch(this.chords=[],this.status){case"000":""==this.key&&(this.chords=[],this.filteredChords=[]);break;case"010":case"110":case"011":case"111":this.pushExtendedChords(t),this.gradeFilter(),this.getChords();break;default:console.log("default"),this.pushAll(),this.gradeFilter(),this.getChords()}console.log(t,this.chords)}},{key:"getChords",value:function(t){var i=this;t&&(this.serVal=t.target.value);var e=[];this.chords.forEach(function(t){t.chord.symbol.toLowerCase().trim().includes(i.serVal)?e.push(t):t.chord.aliases.forEach(function(o){o.toLowerCase().trim().includes(i.serVal)&&e.push(t)})}),this.filteredChords=e,console.log(this.serVal,this.filteredChords)}},{key:"toggleCard",value:function(t){t.show=0==t.show}},{key:"playChord",value:function(t,i){var e=this,o=["Cb","C","C#","Db","D","D#","Eb","E","E#","Fb","F","F#","Gb","G","G#","Ab","A","A#","Bb","B","B#"],n=t.chord.notes.map(function(i,e){if(i.includes("##")){var n=o.indexOf(i.slice(0,-1));i=o[(n+2)%o.length]}if(i.includes("bb")){var c=o.indexOf(i);i=o[(c-2)%o.length]}return parseInt(t.chord.intervals[e],10)<=7?i+"3":i+"4"});console.log(n),"arp"==i?n.forEach(function(t,i){e.synth.triggerAttackRelease(t,"4n",h.e()+i/2)}):"chord"==i&&this.synth.triggerAttackRelease(n,"2n")}},{key:"beautify",value:function(t){var i=this,e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o="";switch(e){case!0:if(t)return t.forEach(function(e,n){0!=n&&n!=t.length&&""!=e?o=o+", "+i.musicNotationPipe.transform(e):o+=i.musicNotationPipe.transform(e)}),o;break;case!1:return t.forEach(function(i,e){0!=e&&e!=t.length&&""!=i?o=o+", "+i:o+=i}),o}}},{key:"ngOnInit",value:function(){var t=this;this.scale=["","Cb","C","C#","Db","D","D#","Eb","E","E#","Fb","F","F#","Gb","G","G#","Ab","A","A#","Bb","B","B#"],["major","min","dim","aug"].forEach(function(i){t.typesTiles.push({name:i,color:"light",selected:!1})}),["5","7","9","11","13"].forEach(function(i){t.gradesTiles.push({name:i,color:"light",selected:!1})})}},{key:"openModal",value:function(){return Object(b.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.modalCtrl.create({component:f.a,componentProps:{pageName:"notefinder"},cssClass:"fullscreen"});case 2:return i=t.sent,t.next=5,i.present();case 5:case"end":return t.stop()}},t,this)}))}}])&&i(o.prototype,n),c&&i(o,c),e}()).\u0275fac=function(t){return new(t||j)(g.Hb(m.d),g.Hb(d.a),g.Hb(s.P))},j.\u0275cmp=g.Bb({type:j,selectors:[["app-notefinder"]],decls:24,vars:12,consts:[["slot","start"],["lines","none"],[2,"padding","0","text-align","left"],["name","information-circle-outline","color","medium","size","large","slot","end",3,"click"],["slot","end","color","light","interface","popover",3,"ngModel","ngModelChange","ionChange"],[3,"value",4,"ngFor","ngForOf"],["size","3",4,"ngFor","ngForOf"],["size","12/5",4,"ngFor","ngForOf"],["animated","true","color","light",1,"button-tiles",3,"placeholder","ionChange"],[4,"ngIf"],[3,"value"],["size","3"],["expand","block",1,"button-tiles",3,"color","click"],["size","12/5"],["style","border: 1px solid grey;",4,"ngFor","ngForOf"],[2,"border","1px solid grey"],[3,"click",4,"ngIf"],[3,"click"],["color","secondary",3,"click",4,"ngIf"],["color","secondary",3,"click"]],template:function(t,i){1&t&&(g.Mb(0,"ion-header"),g.Mb(1,"ion-toolbar"),g.Mb(2,"ion-buttons",0),g.Ib(3,"ion-menu-button"),g.Lb(),g.Mb(4,"ion-item",1),g.Mb(5,"ion-title",2),g.oc(6),g.Xb(7,"translate"),g.Lb(),g.Mb(8,"ion-icon",3),g.Ub("click",function(){return i.openModal()}),g.Lb(),g.Lb(),g.Lb(),g.Lb(),g.Mb(9,"ion-content"),g.Mb(10,"ion-item"),g.Mb(11,"ion-select",4),g.Ub("ngModelChange",function(t){return i.key=t})("ionChange",function(){return i.searchChord()}),g.mc(12,p,3,4,"ion-select-option",5),g.Lb(),g.Lb(),g.Mb(13,"ion-grid"),g.Mb(14,"ion-row"),g.mc(15,y,4,4,"ion-col",6),g.Lb(),g.Lb(),g.Mb(16,"ion-grid"),g.Mb(17,"ion-row"),g.mc(18,v,4,4,"ion-col",7),g.Lb(),g.Lb(),g.Mb(19,"ion-searchbar",8),g.Ub("ionChange",function(t){return i.getChords(t)}),g.Xb(20,"translate"),g.Lb(),g.Ib(21,"br"),g.mc(22,$,2,1,"ng-container",9),g.mc(23,V,2,1,"ng-container",9),g.Lb()),2&t&&(g.xb(6),g.qc(" ",g.Yb(7,8,"home.notefinder")," "),g.xb(5),g.bc("ngModel",i.key),g.xb(1),g.bc("ngForOf",i.scale),g.xb(3),g.bc("ngForOf",i.typesTiles),g.xb(3),g.bc("ngForOf",i.gradesTiles),g.xb(1),g.bc("placeholder",g.Yb(20,10,"notefinder.search")),g.xb(3),g.bc("ngIf",0==i.filteredChords.length),g.xb(1),g.bc("ngIf",i.filteredChords.length>0))},directives:[s.q,s.M,s.e,s.y,s.t,s.K,s.r,s.l,s.G,s.U,r.d,r.e,c.h,s.p,s.E,s.F,s.V,c.i,s.H,s.k,s.d,s.f,s.h,s.j,s.i,s.g,s.J],pipes:[m.c,u.a],styles:[".button-tiles[_ngcontent-%COMP%]{text-transform:none;background-color:var(--ion-color-light-tint);max-width:94%;margin:3%;padding:0;--border-radius:5px;border-radius:5px;border:1px solid grey}"]}),j),J=n("99Un"),K=n("tk/3"),R=n("HU+/"),S=((H=function i(){t(this,i)}).\u0275mod=g.Fb({type:H}),H.\u0275inj=g.Eb({factory:function(t){return new(t||H)},imports:[[c.b,r.a,s.N,R.a,m.b.forChild({loader:{provide:m.a,useFactory:J.HttpLoaderFactory,deps:[K.a]}}),a.i.forChild([{path:"",component:z}])]]}),H)}}])}();