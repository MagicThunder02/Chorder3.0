(window.webpackJsonp=window.webpackJsonp||[]).push([[64],{"9Cc3":function(t,e,o){"use strict";o.r(e),o.d(e,"MetronomePageModule",function(){return X});var n=o("ofXK"),i=o("3Pt+"),a=o("TEn/"),c=o("mrSG"),s=o("XlTo");class r{constructor(t,e,o,n,i){this.getCanvas(e),this.createBalls(t),this.calcBallDiameter(t,n),this.calcCircRadius(o,i),this.drawCircles(t)}getCanvas(t){let e=t.getElementById("content"),o=t.getElementById("header");this.canvas={headerWidth:o.clientWidth,headerHeight:o.clientHeight,contentWidth:e.clientWidth,contentHeight:e.clientHeight}}createBalls(t){this.balls=[];for(let e=0;e<t.beats;e++)this.balls.push({color:"#9d9fa6",diameter:0,cX:0,cY:0});this.circle={color:"black",radius:0,thickness:0,cX:0,cY:0}}calcBallDiameter(t,e){this.balls.forEach(t=>{this.canvas.contentHeight>=this.canvas.contentWidth?(t.diameter=this.canvas.contentWidth/(2*e),t.diameter>40&&(t.diameter=40)):t.diameter=this.canvas.contentHeight/(2*e)}),this.circle.thickness=2,this.circle.color="black"}calcCircRadius(t,e){let o=this.balls[0].diameter;this.circDiameter=this.canvas.contentHeight>=this.canvas.contentWidth?this.canvas.contentWidth/2/t*(e+1)-o:this.canvas.contentHeight/2/t*(e+1)-o,this.circle.radius=2*this.circDiameter}drawCircles(t){this.canvas.headerHeight&&this.balls.forEach((e,o)=>{let n=this.canvas.contentWidth/2-e.diameter/2,i=this.canvas.contentHeight/2-e.diameter/2,a=2*Math.PI/t.beats*o;e.cX=n+this.circDiameter*Math.cos(a-Math.PI/2),e.cY=i+this.circDiameter*Math.sin(a-Math.PI/2),this.circle.cX=n+this.circDiameter*Math.cos(Math.PI)+e.diameter/2+this.circle.thickness/2,this.circle.cY=i+this.circDiameter*Math.sin(-Math.PI/2)+e.diameter/2+this.circle.thickness/2})}lightBall(t,e){this.balls.forEach(t=>{t.color="#9d9fa6"}),this.balls[t.idx].color=0==t.idx&&t.changeFirstBeat?this.shadeColor(t.color,-80):t.color,e.tick()}shadeColor(t,e){return"#"+t.replace(/^#/,"").replace(/../g,t=>("0"+Math.min(255,Math.max(0,parseInt(t,16)+e)).toString(16)).substr(-2))}}class b{constructor(t,e){this.events=[],this.appRef=t,this.doc=e,this.inizializeData()}initializeMetronome(){this.sortTracks(),this.clearTracksIndex(),this.inizializeDrawings(this.doc),this.createSamples(),this.createPart(),this.refreshActualBpm()}inizializeData(){this.data={bpm:120,increase:!1,finalBpm:160,stepBpm:10,measures:4,measureCount:0,showBpm:120,timer:{buffer:8,resetTime:4e3,tapFirst:0,tapAverage:0,tapDeltas:[],tapTimer:0,active:!1},tracks:[{toggle:!1,beats:4,idx:0,changeFirstBeat:!0,sound:"Tick",color:"#3dc2ff",synth:""}],colors:["#3dc2ff","#2dd36f","#ffc409","#eb445a"],sounds:["Tick","Tock","Bell","Tube"]},console.table(this.data)}inizializeDrawings(t){let e=0;this.data.tracks.forEach(o=>{o.drawings=new r(o,t,this.data.tracks.length,this.data.tracks[this.data.tracks.length-1].beats,e++)})}clearTracksIndex(){this.data.tracks.forEach(t=>{t.idx=0,this.data.measureCount=0})}sortTracks(){this.data.tracks.sort(function(t,e){let o=t.beats,n=e.beats;return o<n?-1:o>n?1:0})}addTrack(){let t="";if(this.data.tracks.length<4){switch(this.data.tracks.length){case 0:t="Tick";break;case 1:t="Tock";break;case 2:t="Bell";break;case 3:t="Tube"}this.data.tracks.push({toggle:!1,beats:4,idx:0,changeFirstBeat:!0,sound:t,color:"#3dc2ff",synth:""})}console.log("tracks",this.data.tracks)}removeTrack(){this.data.tracks.length>1&&this.data.tracks.pop()}changeTrackOptions(t,e,o){let n=0;switch(t){case"color":n=this.data.colors.indexOf(o.color),"add"==e?n=(n+1)%this.data.colors.length:(0==n&&(n=this.data.colors.length),n=(n-1)%this.data.colors.length),o.color=this.data.colors[n];break;case"sound":n=this.data.sounds.indexOf(o.sound),"add"==e?n=(n+1)%this.data.sounds.length:(0==n&&(n=this.data.sounds.length),n=(n-1)%this.data.sounds.length),o.sound=this.data.sounds[n];break;case"firstbeat":o.changeFirstBeat=!o.changeFirstBeat,console.log(o.changeFirstBeat)}}toggleTrackOptions(t,e){e&&(e.toggle=!e.toggle,t.stopPropagation())}modSettings(t,e,o){switch(console.log(t,e,o),t){case"beat":switch(e){case"add":o.beats++;break;case"remove":o.beats--}break;case"bpm":switch(e){case"add":this.data.bpm++;break;case"remove":this.data.bpm--}break;case"step":switch(e){case"add":this.data.stepBpm++;break;case"remove":this.data.stepBpm--}break;case"final":switch(e){case"add":this.data.finalBpm++;break;case"remove":this.data.finalBpm--}break;case"measures":switch(e){case"add":this.data.measures++;break;case"remove":this.data.measures--}}this.controlValues()}getSlider(t){this.data.bpm=t,this.controlValues()}toggleIncrease(t){this.data.increase=!!t,console.log(this.data.increase)}refreshActualBpm(){this.data.showBpm=this.data.bpm}controlValues(){this.data.bpm<30&&(this.data.bpm=30),this.data.bpm>300&&(this.data.bpm=300),this.data.finalBpm<30&&(this.data.finalBpm=30),this.data.finalBpm>300&&(this.data.finalBpm=300),this.data.finalBpm-10<this.data.bpm&&(this.data.finalBpm=this.data.bpm+10),this.data.stepBpm<1&&(this.data.stepBpm=1),this.data.stepBpm>10&&(this.data.stepBpm=10),this.data.measures<1&&(this.data.measures=1),this.data.measures>8&&(this.data.measures=8),this.data.tracks.forEach(t=>{t.beats<2&&(t.beats=2),t.beats>12&&(t.beats=12)})}createMeasure(t){console.log(t);let e=[],o=60/this.data.bpm*this.data.tracks[0].beats/t.beats;for(let n=0;n<t.beats;n++)e.push(0==n&&t.changeFirstBeat?{time:o*n,note:"C3"}:{time:o*n,note:"F2"});return e}createSamples(){this.data.tracks.forEach(t=>{let e=new s.c({urls:{C3:`${t.sound}.wav`},baseUrl:"assets/instruments/"}).toDestination();t.synth=e})}createPart(){const t=60/this.data.bpm*this.data.tracks[0].beats;s.d.bpm.value=this.data.bpm,this.data.tracks.forEach((e,o)=>{let n=t/e.beats,i=new s.b((t,o)=>{e.synth.triggerAttackRelease(o.note,"4n",t)},this.createMeasure(e)).start(0),a=new s.a(t=>{e.drawings.lightBall(e,this.appRef),this.increaseBpm(),e.idx++,e.idx>=e.beats&&(e.idx=0,this.data.measureCount++)},n).start(0);i.loopStart=0,i.loopEnd=t,i.loop=!0,this.events.push(i,a)})}increaseBpm(){this.data.increase&&this.data.showBpm<this.data.finalBpm&&this.data.measureCount>=this.data.measures&&(this.data.showBpm+this.data.stepBpm>this.data.finalBpm||(this.data.showBpm+=this.data.stepBpm),s.d.bpm.value=this.data.showBpm,this.data.measureCount=0)}tapBpm(){this.data.timer.active=!0,clearTimeout(this.data.timer.tapTimer),this.data.timer.tapTimer=setTimeout(()=>{this.data.timer.tapFirst=0,this.data.timer.tapDeltas=[],this.data.timer.tapAverage=0,this.data.timer.active=!1,console.log("Reset timer!")},this.data.timer.resetTime),0!=this.data.timer.tapFirst&&(this.data.timer.tapDeltas.length>this.data.timer.buffer&&this.data.timer.tapDeltas.shift(),this.data.timer.tapDeltas.push(60/((Date.now()-this.data.timer.tapFirst)/1e3)),this.data.timer.tapFirst=Date.now()),0==this.data.timer.tapFirst&&(this.data.timer.tapFirst=Date.now()),this.data.timer.tapAverage=0,this.data.timer.tapDeltas.forEach(t=>{this.data.timer.tapAverage+=t}),this.data.timer.tapAverage=this.data.timer.tapAverage/this.data.timer.tapDeltas.length,this.data.timer.tapAverage&&(this.data.bpm=Math.round(this.data.timer.tapAverage))}cancelEvents(){this.events.forEach(t=>{t.cancel(0)}),this.events=[],console.log("events cancelled")}play(){s.d.bpm.value=this.data.bpm,s.d.position=0,s.d.start()}runMetronome(t){switch(console.log("run",this.data.bpm,t),t){case"start":this.play();break;case"pause":s.d.pause(),this.clearTracksIndex();break;case"stop":s.d.pause(),s.d.position=0,this.cancelEvents();break;case"addBpm":this.data.bpm++,this.controlValues();break;case"removeBpm":this.data.bpm--,this.controlValues()}}}var l=o("fXoL"),m=o("sYmb");function d(t,e){if(1&t&&(l.Mb(0,"div",11),l.Mb(1,"ion-text"),l.oc(2," BPM "),l.Ib(3,"br"),l.oc(4),l.Lb(),l.Lb()),2&t){const t=l.Wb(2);l.xb(4),l.qc(" ",t.metronome.data.showBpm," ")}}function h(t,e){if(1&t&&l.Ib(0,"div",13),2&t){const t=e.$implicit;l.kc("background",t.color)("height",t.diameter+"px")("width",t.diameter+"px")("left",t.cX+"px")("top",t.cY+"px")}}function g(t,e){if(1&t&&l.Ib(0,"div",15),2&t){const t=e.$implicit;l.kc("border",t.drawings.circle.thickness+"px solid "+t.drawings.circle.color)("height",t.drawings.circle.radius+"px")("width",t.drawings.circle.radius+"px")("left",t.drawings.circle.cX+"px")("top",t.drawings.circle.cY+"px")}}function p(t,e){if(1&t&&(l.Kb(0),l.mc(1,g,1,10,"div",14),l.Jb()),2&t){const t=l.Wb(3);l.xb(1),l.bc("ngForOf",t.metronome.data.tracks)}}function u(t,e){if(1&t&&(l.Kb(0),l.mc(1,h,1,10,"div",12),l.mc(2,p,2,1,"ng-container",2),l.Jb()),2&t){const t=e.$implicit,o=l.Wb(2);l.xb(1),l.bc("ngForOf",t.drawings.balls),l.xb(1),l.bc("ngIf",o.metronome.data.tracks.length>=2)}}function f(t,e){if(1&t&&(l.Kb(0),l.Mb(1,"div",8),l.mc(2,d,5,1,"div",9),l.Lb(),l.mc(3,u,3,2,"ng-container",10),l.Jb()),2&t){const t=l.Wb();l.xb(2),l.bc("ngIf",t.metronome),l.xb(1),l.bc("ngForOf",t.metronome.data.tracks)}}let M=(()=>{class t{constructor(t,e){this.modalController=t,this.navParams=e}ionViewDidEnter(){this.metronome=this.navParams.get("metronome")}ngOnInit(){}closeModal(){return Object(c.a)(this,void 0,void 0,function*(){yield this.modalController.dismiss()})}}return t.\u0275fac=function(e){return new(e||t)(l.Hb(a.P),l.Hb(a.Q))},t.\u0275cmp=l.Bb({type:t,selectors:[["app-show-metronome"]],decls:21,vars:4,consts:[["lines","none"],[1,"ion-text-center",2,"padding","0"],[4,"ngIf"],[1,"ion-no-border"],["color","secondary",3,"click"],["name","arrow-back"],["name","play"],["name","stop"],[1,"container"],["class","bpmClass",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"bpmClass"],["class","ball",3,"background","height","width","left","top",4,"ngFor","ngForOf"],[1,"ball"],["class","circumpherence",3,"border","height","width","left","top",4,"ngFor","ngForOf"],[1,"circumpherence"]],template:function(t,e){1&t&&(l.Mb(0,"ion-header"),l.Mb(1,"ion-toolbar"),l.Mb(2,"ion-item",0),l.Mb(3,"ion-title",1),l.oc(4),l.Xb(5,"translate"),l.Lb(),l.Lb(),l.Lb(),l.Lb(),l.Mb(6,"ion-content"),l.mc(7,f,4,2,"ng-container",2),l.Lb(),l.Mb(8,"ion-footer",3),l.Mb(9,"ion-toolbar"),l.Mb(10,"ion-grid"),l.Mb(11,"ion-row"),l.Mb(12,"ion-col"),l.Mb(13,"ion-button",4),l.Ub("click",function(){return e.metronome.runMetronome("stop"),e.closeModal()}),l.Ib(14,"ion-icon",5),l.Lb(),l.Lb(),l.Mb(15,"ion-col"),l.Mb(16,"ion-button",4),l.Ub("click",function(){return e.metronome.runMetronome("start"),e.metronome.refreshActualBpm()}),l.Ib(17,"ion-icon",6),l.Lb(),l.Lb(),l.Mb(18,"ion-col"),l.Mb(19,"ion-button",4),l.Ub("click",function(){return e.metronome.runMetronome("pause")}),l.Ib(20,"ion-icon",7),l.Lb(),l.Lb(),l.Lb(),l.Lb(),l.Lb(),l.Lb()),2&t&&(l.xb(4),l.qc(" ",l.Yb(5,2,"home.metronome")," "),l.xb(3),l.bc("ngIf",e.metronome))},directives:[a.q,a.M,a.t,a.K,a.l,n.i,a.o,a.p,a.E,a.k,a.d,a.r,n.h,a.J],pipes:[m.c],styles:["ion-content[_ngcontent-%COMP%]{--overflow:hidden}ion-col[_ngcontent-%COMP%]{text-align:center}.ball[_ngcontent-%COMP%]{border-radius:50%;position:absolute;max-width:40px;max-height:40px;z-index:2;border:1px solid grey}.circumpherence[_ngcontent-%COMP%]{border:1px solid #000;height:100px;border-radius:50%;position:absolute;width:100px}.container[_ngcontent-%COMP%]{padding-top:5%}.bpmClass[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;text-align:center}.bpmClass[_ngcontent-%COMP%]{width:20vmin;height:12vmin;border-radius:5px;border:2px solid grey}"]}),t})();var k=o("90kD");function L(t,e){if(1&t&&(l.Mb(0,"ion-text"),l.oc(1," BPM "),l.Ib(2,"br"),l.oc(3),l.Lb()),2&t){const t=l.Wb(3);l.xb(3),l.qc(" ",t.metronome.data.bpm," ")}}function x(t,e){if(1&t&&(l.Mb(0,"ion-text"),l.oc(1," TAP "),l.Ib(2,"br"),l.oc(3),l.Lb()),2&t){const t=l.Wb(3);l.xb(3),l.qc(" ",t.metronome.data.bpm," ")}}function v(t,e){if(1&t&&(l.Mb(0,"div",34),l.mc(1,L,4,1,"ion-text",6),l.mc(2,x,4,1,"ion-text",6),l.Lb()),2&t){const t=l.Wb(2);l.xb(1),l.bc("ngIf",!t.metronome.data.timer.active),l.xb(1),l.bc("ngIf",t.metronome.data.timer.active)}}function w(t,e){if(1&t){const t=l.Nb();l.Mb(0,"ion-row",24),l.Mb(1,"ion-col",35),l.Mb(2,"ion-text"),l.oc(3),l.Xb(4,"translate"),l.Lb(),l.Lb(),l.Mb(5,"ion-col",36),l.Mb(6,"ion-button",18),l.Ub("click",function(){return l.gc(t),l.Wb(2).metronome.modSettings("final","remove")}),l.Ib(7,"ion-icon",19),l.Lb(),l.Lb(),l.Mb(8,"ion-col",37),l.Mb(9,"ion-text"),l.oc(10),l.Lb(),l.Lb(),l.Mb(11,"ion-col",38),l.Mb(12,"ion-button",18),l.Ub("click",function(){return l.gc(t),l.Wb(2).metronome.modSettings("final","add")}),l.Ib(13,"ion-icon",12),l.Lb(),l.Lb(),l.Lb()}if(2&t){const t=l.Wb(2);l.xb(3),l.qc("",l.Yb(4,2,"metronome.finalbpm"),":"),l.xb(7),l.pc(t.metronome.data.finalBpm)}}function I(t,e){if(1&t){const t=l.Nb();l.Mb(0,"ion-row",24),l.Mb(1,"ion-col",35),l.Mb(2,"ion-text"),l.oc(3),l.Xb(4,"translate"),l.Lb(),l.Lb(),l.Mb(5,"ion-col",36),l.Mb(6,"ion-button",18),l.Ub("click",function(){return l.gc(t),l.Wb(2).metronome.modSettings("step","remove")}),l.Ib(7,"ion-icon",19),l.Lb(),l.Lb(),l.Mb(8,"ion-col",37),l.Mb(9,"ion-text"),l.oc(10),l.Lb(),l.Lb(),l.Mb(11,"ion-col",38),l.Mb(12,"ion-button",18),l.Ub("click",function(){return l.gc(t),l.Wb(2).metronome.modSettings("step","add")}),l.Ib(13,"ion-icon",12),l.Lb(),l.Lb(),l.Lb()}if(2&t){const t=l.Wb(2);l.xb(3),l.qc("",l.Yb(4,2,"metronome.step"),":"),l.xb(7),l.pc(t.metronome.data.stepBpm)}}function B(t,e){if(1&t){const t=l.Nb();l.Mb(0,"ion-row",39),l.Mb(1,"ion-col",35),l.Mb(2,"ion-text"),l.oc(3),l.Xb(4,"translate"),l.Lb(),l.Lb(),l.Mb(5,"ion-col",36),l.Mb(6,"ion-button",18),l.Ub("click",function(){return l.gc(t),l.Wb(2).metronome.modSettings("measures","remove")}),l.Ib(7,"ion-icon",19),l.Lb(),l.Lb(),l.Mb(8,"ion-col",37),l.Mb(9,"ion-text"),l.oc(10),l.Lb(),l.Lb(),l.Mb(11,"ion-col",38),l.Mb(12,"ion-button",18),l.Ub("click",function(){return l.gc(t),l.Wb(2).metronome.modSettings("measures","add")}),l.Ib(13,"ion-icon",12),l.Lb(),l.Lb(),l.Lb()}if(2&t){const t=l.Wb(2);l.xb(3),l.qc("",l.Yb(4,2,"metronome.measures"),":"),l.xb(7),l.pc(t.metronome.data.measures)}}function C(t,e){if(1&t){const t=l.Nb();l.Mb(0,"ion-col",44),l.Mb(1,"ion-icon",45),l.Ub("click",function(e){l.gc(t);const o=l.Wb().$implicit;return l.Wb(2).metronome.toggleTrackOptions(e,o)}),l.Lb(),l.Lb()}}function W(t,e){if(1&t){const t=l.Nb();l.Mb(0,"ion-col",44),l.Mb(1,"ion-icon",46),l.Ub("click",function(e){l.gc(t);const o=l.Wb().$implicit;return l.Wb(2).metronome.toggleTrackOptions(e,o)}),l.Lb(),l.Lb()}}function y(t,e){if(1&t){const t=l.Nb();l.Mb(0,"ion-row",40),l.Mb(1,"ion-col",35),l.Mb(2,"ion-text"),l.oc(3),l.Xb(4,"translate"),l.Lb(),l.Lb(),l.Mb(5,"ion-col",36),l.Mb(6,"ion-button",18),l.Ub("click",function(){l.gc(t);const e=l.Wb().$implicit;return l.Wb(2).metronome.changeTrackOptions("color","remove",e)}),l.Ib(7,"ion-icon",47),l.Lb(),l.Lb(),l.Mb(8,"ion-col",37),l.Ib(9,"div",48),l.Lb(),l.Mb(10,"ion-col",38),l.Mb(11,"ion-button",18),l.Ub("click",function(){l.gc(t);const e=l.Wb().$implicit;return l.Wb(2).metronome.changeTrackOptions("color","add",e)}),l.Ib(12,"ion-icon",49),l.Lb(),l.Lb(),l.Lb()}if(2&t){const t=l.Wb().$implicit;l.xb(3),l.qc("",l.Yb(4,3,"metronome.color"),":"),l.xb(6),l.kc("background-color",t.color)}}function O(t,e){if(1&t){const t=l.Nb();l.Mb(0,"ion-row",40),l.Mb(1,"ion-col",35),l.Mb(2,"ion-text"),l.oc(3),l.Xb(4,"translate"),l.Lb(),l.Lb(),l.Mb(5,"ion-col",36),l.Mb(6,"ion-button",18),l.Ub("click",function(){l.gc(t);const e=l.Wb().$implicit;return l.Wb(2).metronome.changeTrackOptions("sound","remove",e)}),l.Ib(7,"ion-icon",47),l.Lb(),l.Lb(),l.Mb(8,"ion-col",37),l.Mb(9,"ion-text"),l.oc(10),l.Lb(),l.Lb(),l.Mb(11,"ion-col",38),l.Mb(12,"ion-button",18),l.Ub("click",function(){l.gc(t);const e=l.Wb().$implicit;return l.Wb(2).metronome.changeTrackOptions("sound","add",e)}),l.Ib(13,"ion-icon",49),l.Lb(),l.Lb(),l.Lb()}if(2&t){const t=l.Wb().$implicit;l.xb(3),l.qc("",l.Yb(4,2,"metronome.sound"),":"),l.xb(7),l.pc(t.sound)}}function T(t,e){if(1&t){const t=l.Nb();l.Mb(0,"ion-row",40),l.Mb(1,"ion-col"),l.Mb(2,"ion-text"),l.oc(3),l.Xb(4,"translate"),l.Lb(),l.Lb(),l.Mb(5,"ion-col",17),l.Mb(6,"ion-toggle",50),l.Ub("ionChange",function(){l.gc(t);const e=l.Wb().$implicit;return l.Wb(2).metronome.changeTrackOptions("firstbeat","",e)}),l.Lb(),l.Lb(),l.Lb()}if(2&t){const t=l.Wb().$implicit;l.xb(3),l.qc("",l.Yb(4,2,"metronome.firstbeat"),":"),l.xb(3),l.bc("checked",t.changeFirstBeat)}}function P(t,e){if(1&t){const t=l.Nb();l.Kb(0),l.Mb(1,"ion-row",40),l.mc(2,C,2,0,"ion-col",41),l.mc(3,W,2,0,"ion-col",41),l.Mb(4,"ion-col",42),l.Mb(5,"ion-text"),l.oc(6),l.Xb(7,"translate"),l.Lb(),l.Lb(),l.Mb(8,"ion-col",36),l.Mb(9,"ion-button",18),l.Ub("click",function(){l.gc(t);const o=e.$implicit;return l.Wb(2).metronome.modSettings("beat","remove",o)}),l.Ib(10,"ion-icon",19),l.Lb(),l.Lb(),l.Mb(11,"ion-col",37),l.Mb(12,"ion-text"),l.oc(13),l.Lb(),l.Lb(),l.Mb(14,"ion-col",38),l.Mb(15,"ion-button",18),l.Ub("click",function(){l.gc(t);const o=e.$implicit;return l.Wb(2).metronome.modSettings("beat","add",o)}),l.Ib(16,"ion-icon",12),l.Lb(),l.Lb(),l.Lb(),l.mc(17,y,13,5,"ion-row",43),l.mc(18,O,14,4,"ion-row",43),l.mc(19,T,7,4,"ion-row",43),l.Jb()}if(2&t){const t=e.$implicit;l.xb(2),l.bc("ngIf",!t.toggle),l.xb(1),l.bc("ngIf",t.toggle),l.xb(3),l.qc("",l.Yb(7,7,"metronome.beats"),":"),l.xb(7),l.pc(t.beats),l.xb(4),l.bc("ngIf",t.toggle),l.xb(1),l.bc("ngIf",t.toggle),l.xb(1),l.bc("ngIf",t.toggle)}}function F(t,e){if(1&t){const t=l.Nb();l.Mb(0,"ion-grid"),l.Mb(1,"ion-row",16),l.Mb(2,"ion-col",17),l.Mb(3,"ion-button",18),l.Ub("click",function(){return l.gc(t),l.Wb().metronome.modSettings("bpm","remove")}),l.Ib(4,"ion-icon",19),l.Lb(),l.Lb(),l.Mb(5,"ion-col",20),l.Mb(6,"div",21),l.Ub("click",function(){return l.gc(t),l.Wb().metronome.tapBpm()}),l.mc(7,v,3,2,"div",22),l.Lb(),l.Lb(),l.Mb(8,"ion-col",23),l.Mb(9,"ion-button",18),l.Ub("click",function(){return l.gc(t),l.Wb().metronome.modSettings("bpm","add")}),l.Ib(10,"ion-icon",12),l.Lb(),l.Lb(),l.Lb(),l.Mb(11,"ion-row",24),l.Mb(12,"ion-col"),l.Mb(13,"ion-range",25),l.Ub("ngModelChange",function(e){return l.gc(t),l.Wb().sliderValue=e})("ionChange",function(){l.gc(t);const e=l.Wb();return e.metronome.getSlider(e.sliderValue)}),l.Ib(14,"ion-icon",26),l.Ib(15,"ion-icon",27),l.Lb(),l.Lb(),l.Lb(),l.Mb(16,"ion-row",28),l.Ib(17,"ion-col"),l.Lb(),l.Mb(18,"ion-row",24),l.Mb(19,"ion-col"),l.Mb(20,"ion-text"),l.oc(21),l.Xb(22,"translate"),l.Lb(),l.Lb(),l.Mb(23,"ion-col",17),l.Mb(24,"ion-toggle",29),l.Ub("ngModelChange",function(e){return l.gc(t),l.Wb().increase=e})("ionChange",function(){l.gc(t);const e=l.Wb();return e.metronome.toggleIncrease(e.increase)}),l.Lb(),l.Lb(),l.Lb(),l.mc(25,w,14,4,"ion-row",30),l.mc(26,I,14,4,"ion-row",30),l.mc(27,B,14,4,"ion-row",31),l.Mb(28,"ion-row",32),l.Ib(29,"ion-col"),l.Lb(),l.mc(30,P,20,9,"ng-container",33),l.Mb(31,"ion-row",32),l.Ib(32,"ion-col"),l.Lb(),l.Lb()}if(2&t){const t=l.Wb();l.xb(7),l.bc("ngIf",t.metronome),l.xb(6),l.bc("ngModel",t.sliderValue)("value",t.metronome.data.bpm),l.xb(8),l.qc("",l.Yb(22,9,"metronome.increase"),":"),l.xb(3),l.bc("ngModel",t.increase),l.xb(1),l.bc("ngIf",t.increase),l.xb(1),l.bc("ngIf",t.increase),l.xb(1),l.bc("ngIf",t.increase),l.xb(3),l.bc("ngForOf",t.metronome.data.tracks)}}let U=(()=>{class t{constructor(t,e){this.modalCtrl=t,this.applicationRef=e,this.sliderValue=120,this.increase=!1}ionViewDidEnter(){this.metronome=new b(this.applicationRef,document)}ngOnInit(){}openMetroModal(){return Object(c.a)(this,void 0,void 0,function*(){s.f();const t=yield this.modalCtrl.create({component:M,componentProps:{metronome:this.metronome,document},cssClass:"fullscreen"});t.onDidDismiss().then(t=>{}),yield t.present()})}openModal(){return Object(c.a)(this,void 0,void 0,function*(){const t=yield this.modalCtrl.create({component:k.a,componentProps:{pageName:"metronome"},cssClass:"fullscreen"});yield t.present()})}}return t.\u0275fac=function(e){return new(e||t)(l.Hb(a.P),l.Hb(l.g))},t.\u0275cmp=l.Bb({type:t,selectors:[["app-metronome"]],decls:22,vars:4,consts:[["id","header"],["slot","start"],["lines","none"],[2,"padding","0"],["name","information-circle-outline","color","medium","size","large",3,"click"],["id","content"],[4,"ngIf"],[1,"center"],["color","secondary",3,"click"],["name","play"],["vertical","bottom","horizontal","end","slot","fixed",3,"click"],["color","secondary"],["name","add"],["vertical","bottom","horizontal","start","slot","fixed",3,"click"],["color","danger"],["name","trash"],[1,"ion-align-items-center",2,"padding-top","5%"],[1,"ion-text-right"],["size","small","color","secondary",3,"click"],["name","remove"],[1,"ion-text-center"],[1,"container",3,"click"],["class","bpmClass",4,"ngIf"],[1,"ion-text-left"],[1,"ion-align-items-center"],["min","30","max","300","debounce","15","color","secondary",3,"ngModel","value","ngModelChange","ionChange"],["name","musical-notes","slot","start","size","small"],["name","musical-notes","slot","end"],[2,"border-top","1px solid rgb(184, 184, 184)"],["color","secondary",3,"ngModel","ngModelChange","ionChange"],["class","ion-align-items-center",4,"ngIf"],["style","padding-bottom: 3%;","class","ion-align-items-center",4,"ngIf"],[2,"border-bottom","1px solid rgb(184, 184, 184)"],[4,"ngFor","ngForOf"],[1,"bpmClass"],["size","6.5"],["size","2",1,"ion-text-right"],["size","1.5",1,"ion-text-center"],["size","2",1,"ion-text-left"],[1,"ion-align-items-center",2,"padding-bottom","3%"],[1,"ion-align-items-center",2,"padding-top","3%"],["size","1",4,"ngIf"],["size","5.5"],["style","padding-top: 3%;","class","ion-align-items-center",4,"ngIf"],["size","1"],["name","caret-forward-circle-outline","size","large","color","medium",3,"click"],["name","caret-down-circle-outline","size","large","color","medium",3,"click"],["name","caret-back-outline"],[1,"showColor"],["name","caret-forward-outline"],["color","secondary",3,"checked","ionChange"]],template:function(t,e){1&t&&(l.Mb(0,"ion-header",0),l.Mb(1,"ion-toolbar"),l.Mb(2,"ion-buttons",1),l.Ib(3,"ion-menu-button"),l.Lb(),l.Mb(4,"ion-item",2),l.Mb(5,"ion-title",3),l.oc(6),l.Xb(7,"translate"),l.Lb(),l.Mb(8,"ion-icon",4),l.Ub("click",function(){return e.openModal()}),l.Lb(),l.Lb(),l.Lb(),l.Lb(),l.Mb(9,"ion-content",5),l.mc(10,F,33,11,"ion-grid",6),l.Mb(11,"ion-grid"),l.Mb(12,"ion-row"),l.Mb(13,"ion-col",7),l.Mb(14,"ion-button",8),l.Ub("click",function(){return e.metronome.initializeMetronome(),e.openMetroModal()}),l.Ib(15,"ion-icon",9),l.Lb(),l.Lb(),l.Lb(),l.Lb(),l.Mb(16,"ion-fab",10),l.Ub("click",function(){return e.metronome.addTrack()}),l.Mb(17,"ion-fab-button",11),l.Ib(18,"ion-icon",12),l.Lb(),l.Lb(),l.Mb(19,"ion-fab",13),l.Ub("click",function(){return e.metronome.removeTrack()}),l.Mb(20,"ion-fab-button",14),l.Ib(21,"ion-icon",15),l.Lb(),l.Lb(),l.Lb()),2&t&&(l.xb(6),l.qc(" ",l.Yb(7,2,"home.metronome")," "),l.xb(4),l.bc("ngIf",e.metronome))},directives:[a.q,a.M,a.e,a.y,a.t,a.K,a.r,a.l,n.i,a.p,a.E,a.k,a.d,a.m,a.n,a.C,a.U,i.d,i.e,a.J,a.L,a.a,n.h],pipes:[m.c],styles:["ion-content[_ngcontent-%COMP%]{height:100%}ion-input[_ngcontent-%COMP%]{text-align:right}ion-text[_ngcontent-%COMP%]{font-size:medium;padding-left:2%;padding-right:2%}.center[_ngcontent-%COMP%]{text-align:center}.showColor[_ngcontent-%COMP%]{margin:0 auto;width:6vmin;height:6vmin;border-radius:50%;border:1px solid #000;background-color:grey}.bpmClass[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:1%;margin:0 auto;width:20vmin;height:12vmin;border-radius:5px;border:2px solid grey}"]}),t})();var D=o("tyNb"),z=o("tk/3"),E=o("ZAI4");let X=(()=>{class t{}return t.\u0275mod=l.Fb({type:t}),t.\u0275inj=l.Eb({factory:function(e){return new(e||t)},imports:[[n.b,i.a,a.N,D.i.forChild([{path:"",component:U},{path:"/show",component:M}]),m.b.forChild({loader:{provide:m.a,useFactory:E.b,deps:[z.a]}})]]}),t})()}}]);